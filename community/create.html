<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>글쓰기</title>
<style>
body { font-family: Arial; padding: 20px; max-width: 600px; margin: auto; }
input, textarea { display: block; margin-bottom: 10px; width: 100%; padding: 8px; }
button { cursor: pointer; padding: 10px; width: 100%; background-color: #4CAF50; color: white; border: none; }
button:hover { background-color: #45a049; }
</style>
</head>
<body>

<h1>글쓰기</h1>
<input id="title" placeholder="제목">
<textarea id="content" placeholder="내용"></textarea>
<button onclick="createPost()">작성</button>

<script>
const API_BASE = "https://community-xabl.onrender.com/api";

async function createPost() {
  const title = document.getElementById("title").value.trim();
  const content = document.getElementById("content").value.trim();
  if(!title || !content) { alert("제목과 내용을 입력해주세요."); return; }

  try {
    const res = await fetch(`${API_BASE}/posts`, {
      method:"POST",
      headers: {"Content-Type":"application/json"},
      credentials:"include",
      body: JSON.stringify({title, content})
    });
    if(res.ok) { alert("글 작성 완료!"); window.location.href="index.html"; }
    else { alert(await res.json()); }
  } catch(err){ console.error(err); alert("글 작성 실패"); }
}
</script>

</body>
</html>
